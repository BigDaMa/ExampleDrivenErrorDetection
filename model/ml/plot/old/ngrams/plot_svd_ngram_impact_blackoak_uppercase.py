import matplotlib.pyplot as plt
import numpy as np

def get_label(list_of_lists, labels):
    new_list = []
    min = -1
    for l in list_of_lists:
        if min == -1 or len(l) < min:
            min = len(l)

    for i in range(len(list_of_lists)):
        new_list.append(list_of_lists[i][0:min])

    return new_list, labels[0:min]

def plot_list(ranges, list_series, list_names):
    fig = plt.figure()
    ax = plt.subplot(111)

    for i in range(len(list_series)):
        ax.plot(ranges[i], list_series[i], label=list_names[i])

    ax.set_ylabel('fscore')
    ax.set_xlabel('labels')

    ax.legend(loc=4)

    plt.show()


def plot_real_stats(ranges, list_all, list_names):
    fig = plt.figure()
    ax = plt.subplot(111)

    print list_names

    for i in range(len(list_all)):
        mins = np.min(np.matrix(list_all[i]), axis=0).A1
        maxes = np.max(np.matrix(list_all[i]), axis=0).A1
        means = np.mean(np.matrix(list_all[i]), axis=0).A1
        std = np.std(np.matrix(list_all[i]), axis=0).A1

        print len(std)
        print len(means)
        print len(ranges[i])
        print list_names[i]

        # create stacked errorbars:
        ax.errorbar(ranges[i], means, std, label=list_names[i])
        ax.errorbar(ranges[i], means, [means - mins, maxes - means], fmt='.k', ecolor='gray', lw=1)

    ax.set_ylabel('fscore')
    ax.set_xlabel('labels')

    ax.legend(loc=4)

    plt.show()


fscore_unigrams = []
fscore_unigrams.append([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.016414141414141416, 0.41489642853888142, 0.4678431322437609, 0.60792197991447194, 0.60792197991447194, 0.60792197991447194, 0.60792197991447194, 0.66677068821398722, 0.66497195572479029, 0.79498319913567228, 0.79498319913567228, 0.79498455387970202, 0.79499251652806546, 0.79498480243161085, 0.87957071674971254, 0.92880122042520663, 0.92880122042520663, 0.92880122042520663, 0.92880412991178829, 0.92881084095052535, 0.9288374730207658, 0.93248499037118138, 0.91787262813792936, 0.91859409450520957, 0.91859409450520957, 0.91856440153033347, 0.91858777612410369, 0.91859729079630337, 0.91839703172284592, 0.93554090378543475, 0.93664832202986126, 0.93664832202986126])
fscore_unigrams.append([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.05278426802971968, 0.40011470982267067, 0.42407358346855656, 0.55585985597552334, 0.55585985597552334, 0.55585985597552334, 0.55585985597552334, 0.71247298833505723, 0.75307485837515586, 0.81723410627465221, 0.82692505529550953, 0.82692462250169585, 0.82692839369643356, 0.82693216486692411, 0.8326391421460424, 0.85972698607253362, 0.92147122252832869, 0.92147122252832869, 0.92147983781745424, 0.92148656018698882, 0.92149328247272322, 0.92121438696512303, 0.94675772274700032, 0.94675772274700032, 0.94675772274700032, 0.94675772274700032, 0.94679469382935888, 0.94679469382935888, 0.94698978989330296, 0.93825591614033099, 0.92273309767165435, 0.92273309767165435])
fscore_unigrams.append([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.047035384815280003, 0.34715827521963954, 0.35748351738539685, 0.51720135338717255, 0.51720135338717255, 0.51720135338717255, 0.51720135338717255, 0.69136810786765923, 0.74929750584700483, 0.81746654894588866, 0.81746654894588866, 0.8174449591795514, 0.81745266422549168, 0.81743373902165684, 0.81743373902165684, 0.82311684578655731, 0.88908840280044976, 0.88908840280044976, 0.8890756353325614, 0.8890823516609081, 0.88910922815089344, 0.88910922815089344, 0.90133264992311646, 0.90135164363155607, 0.90135164363155607, 0.90139008630538031, 0.90139343313409748, 0.90139677994242284, 0.90139677994242284, 0.92434881720296524, 0.92477750941097114, 0.92477750941097114])
fscore_unigrams.append([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.04189851494269816, 0.32499480093352129, 0.35142559355568115, 0.46554916997706347, 0.46555704045680962, 0.46555704045680962, 0.46555704045680962, 0.6336581162590309, 0.69796292202255006, 0.8241841609621644, 0.88090697049094213, 0.88091322373481251, 0.88091672268513443, 0.88093771592760151, 0.88093771592760151, 0.90203300808924536, 0.90577849464359117, 0.90577849464359117, 0.90578129345239933, 0.90578467452129119, 0.90658202286741152, 0.90658202286741152, 0.91695534760263953, 0.91695534760263953, 0.91695534760263953, 0.91695534760263953, 0.91714642841749427, 0.91741306395316613, 0.91741306395316613, 0.93870080612897433, 0.93757305646366085, 0.93757305646366085])
fscore_unigrams.append([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.032494739505235813, 0.40389189782624607, 0.43054637683748015, 0.58001744073380279, 0.58001744073380279, 0.58001744073380279, 0.58001744073380279, 0.69023648915855951, 0.69712560834629711, 0.83350598045334345, 0.83383860814490129, 0.83384343068629818, 0.83385093667431542, 0.83385844256570851, 0.88146813488396525, 0.89299018565221355, 0.89299018565221355, 0.89299018565221355, 0.89299289900914292, 0.89299289900914292, 0.89299289900914292, 0.89295349415266723, 0.93359054677755338, 0.91804625788135552, 0.91804625788135552, 0.91804625788135552, 0.91804625788135552, 0.9180529426120374, 0.91731101048544161, 0.90919077261076531, 0.91957134109001826, 0.91957134109001826])

average_unigrams = list(np.mean(np.matrix(fscore_unigrams), axis=0).A1)


fscore_bigrams = []
fscore_bigrams.append([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.050496415792494545, 0.29725810452403212, 0.34460081546757859, 0.50476385532298373, 0.50476385532298373, 0.50476385532298373, 0.5047822293585873, 0.6752597195139417, 0.69952096361241023, 0.71820480404551201, 0.71825272791765149, 0.71826173075369715, 0.71826623212429408, 0.7184327606125408, 0.72489690847851262, 0.80913668941099637, 0.91420716991385242, 0.91420716991385242, 0.91421064071909885, 0.9142175822630243, 0.91519545222279008, 0.91552437005936749, 0.96119175288387271, 0.96137233681694101, 0.96137233681694101, 0.96137904744675284, 0.96169099599534946, 0.96169099599534946, 0.96171496297444536, 0.9482857543573332, 0.94817222806514334, 0.94817222806514334])
fscore_bigrams.append([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.11792404311004948, 0.42531023488898478, 0.45755239843968143, 0.59770910741347605, 0.59770910741347605, 0.59770910741347605, 0.59770910741347605, 0.74236411195584517, 0.80281660653346643, 0.90564264331927768, 0.90564264331927768, 0.90564968841736626, 0.90565794810060574, 0.90567203764621074, 0.90567203764621074, 0.91420520824245244, 0.93528893728083518, 0.93528893728083518, 0.93528893728083518, 0.93529151802012411, 0.9353392511752423, 0.92800510692626881, 0.93130923796284604, 0.92909260167817753, 0.92909260167817753, 0.92911280938453311, 0.92914985486554236, 0.93017264401401256, 0.93684502042434803, 0.93454570520814406, 0.93450928290318835, 0.93450928290318835])
fscore_bigrams.append([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.11996202037618468, 0.43563092320611474, 0.4588571260340919, 0.58924546366028152, 0.58924546366028152, 0.58924546366028152, 0.58924546366028152, 0.72338346651777918, 0.75910638340521774, 0.88138758930838135, 0.89199215823003541, 0.89199893567891753, 0.89200232437226668, 0.89200976224409279, 0.89200976224409279, 0.91285969560663016, 0.91285969560663016, 0.91285969560663016, 0.91285969560663016, 0.9128697436403016, 0.9128037360145892, 0.90776725768249167, 0.92021171104169763, 0.89491033299500689, 0.89491033299500689, 0.89491380556445876, 0.89501516032237294, 0.89509755553390802, 0.89858256085898502, 0.91867904791852506, 0.89223521344887513, 0.89223521344887513])
fscore_bigrams.append([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.085166819122815457, 0.42940626752227279, 0.43316224057130104, 0.57209179834461998, 0.57209179834461998, 0.57209179834461998, 0.57209179834461998, 0.7159834706789121, 0.7487301744975331, 0.82742406478478148, 0.82794417388869002, 0.82795146830472022, 0.82796240975852631, 0.82797699804582958, 0.82344119010650851, 0.82358315559437867, 0.87277035709654227, 0.87277035709654227, 0.87278032390692462, 0.87283015531519847, 0.8728309048898949, 0.87708005446603832, 0.90458817766066524, 0.90860774752068385, 0.90860774752068385, 0.90860774752068385, 0.90861439181784964, 0.90861439181784964, 0.90871964041715991, 0.89040564878758599, 0.89502910005015723, 0.89502910005015723])
fscore_bigrams.append([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.16192599599126187, 0.47293382799891004, 0.52311710034241721, 0.64757460200859185, 0.64757460200859185, 0.64757460200859185, 0.64757460200859185, 0.75978214132148492, 0.79165274761984306, 0.86315146809477827, 0.86490727626950725, 0.86485444252000443, 0.86485911466297871, 0.86486378671276365, 0.86486378671276365, 0.88969651506431191, 0.92530869419457529, 0.92530869419457529, 0.92534058579503453, 0.92534685232300196, 0.9253473201361081, 0.92536415561954233, 0.96011415369980291, 0.96537359553308622, 0.96537359553308622, 0.96540506357997113, 0.9654151808124336, 0.96542147467240358, 0.96275053020977797, 0.94257641782902957, 0.94127021415737033, 0.94127021415737033])

average_bigrams = list(np.mean(np.matrix(fscore_bigrams), axis=0).A1)

#bigrams with svd runs out of memory

fscore_trigrams = []
fscore_trigrams.append([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.058098387106631871, 0.41732124292480072, 0.45535584472230295, 0.6050795995404562, 0.6050795995404562, 0.6050795995404562, 0.6050795995404562, 0.76739671842953416, 0.79214043557748637, 0.86782460117291071, 0.86782460117291071, 0.867832308263076, 0.86784001524831267, 0.8678454129299048, 0.8678454129299048, 0.86101378481368762, 0.91220583156544477, 0.91220583156544477, 0.91220583156544477, 0.91213551671296744, 0.91210891736240418, 0.91191316815960277, 0.96166492642337864, 0.96129145259224669, 0.96129145259224669, 0.96129145259224669, 0.96136940887961886, 0.96141705461564664, 0.96153172611055981, 0.95040793063258067, 0.95041972717733469, 0.95041972717733469])
fscore_trigrams.append([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.086634172300770418, 0.32172204959249245, 0.33584493378793306, 0.50244944315427253, 0.50244944315427253, 0.50246848183070247, 0.50246848183070247, 0.66707898251578424, 0.74668325887241005, 0.82082607463271251, 0.82082607463271251, 0.82083358546209639, 0.8209312175377923, 0.82087304291341212, 0.82087304291341212, 0.84874491421055009, 0.85026817640047681, 0.85026817640047681, 0.85027190019206289, 0.85052133929149665, 0.85059473883630021, 0.8488209649449785, 0.85697872203857639, 0.85722783287859006, 0.85722783287859006, 0.85724630419251502, 0.85723891573860067, 0.8572472271520889, 0.85891697030527381, 0.86927573993937768, 0.90173484004456461, 0.90173484004456461])
fscore_trigrams.append([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.025070774406970101, 0.35466842626195977, 0.38127528380232739, 0.53542462793659995, 0.5354121236794267, 0.5354121236794267, 0.5354121236794267, 0.59949488338428136, 0.67073959658368165, 0.80647132043294589, 0.80647132043294589, 0.80650430941537021, 0.8065094731064405, 0.80649471569284048, 0.88867823309233229, 0.89195054282635955, 0.89947897043823466, 0.89947897043823466, 0.89947621527245991, 0.89947621527245991, 0.89951203374410715, 0.86446978686971387, 0.8909900888409592, 0.8881173825280424, 0.8881173825280424, 0.8881273215648825, 0.88813015816235263, 0.88812660694038548, 0.92249854869102788, 0.93950986252241486, 0.94261904536519026, 0.94261904536519026])
fscore_trigrams.append([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.023836464692936099, 0.41350009082169265, 0.46792718982068088, 0.60307742907224893, 0.60307742907224893, 0.60307742907224893, 0.60307742907224893, 0.764521748416507, 0.7840120475238731, 0.85326676352028819, 0.85347050717024386, 0.85347832909216192, 0.8534822400130988, 0.85348232741859553, 0.85348232741859553, 0.87410001565190176, 0.92182890855457222, 0.92182890855457222, 0.92182890855457222, 0.92183564674487062, 0.92182412459143437, 0.92182412459143437, 0.96117963160791164, 0.9621988890042571, 0.9621988890042571, 0.96220225637830847, 0.96221235836934937, 0.96224743746572738, 0.96162411142913629, 0.94923930953942637, 0.94967010685147935, 0.94967010685147935])
fscore_trigrams.append([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.075389540083792297, 0.45487240815321578, 0.486878579135198, 0.6198579316474957, 0.6198579316474957, 0.6198579316474957, 0.6198579316474957, 0.77237400682423274, 0.72049521177888853, 0.85219553652932101, 0.85462201851080211, 0.85462385413773057, 0.85462838744298364, 0.85464284925141809, 0.85611063998814652, 0.89013115325270031, 0.89013115325270031, 0.89013115325270031, 0.89013460587263604, 0.8903716048154412, 0.89059814716402974, 0.89001552312946286, 0.9221040582532124, 0.92338510560985376, 0.92338510560985376, 0.9233908411882541, 0.92327960129752307, 0.92334752478324367, 0.92366623448901974, 0.94381035719137085, 0.94431797787832139, 0.94431797787832139])

average_trigrams = list(np.mean(np.matrix(fscore_trigrams), axis=0).A1)

#svd - unigrams
fscore_0 = []
fscore_0.append([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.019724363054314468, 0.34711857588253048, 0.36683973865301972, 0.50302073378485068, 0.50302073378485068, 0.50302073378485068, 0.50302073378485068, 0.68927914099271803, 0.78987634090775527, 0.91562398351946217, 0.96274558340716032, 0.96275571855244002, 0.96275909689018591, 0.96276923177138474, 0.96276923177138474, 0.95525757832562097, 0.9296087632841401, 0.9296087632841401, 0.9295631970563919, 0.92962265877217054, 0.93073721662776832, 0.92961768800185185, 0.94806689957432966, 0.95985053546435073, 0.95985053546435073, 0.95989644112001737, 0.95995281439798508, 0.95995281439798508, 0.96107176227848345, 0.96217488060091694, 0.96818632276802219, 0.96818632276802219])
fscore_0.append([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.06325768492571085, 0.43590238699474054, 0.44687096288248473, 0.54632791030425987, 0.54634441773757025, 0.54636915914381434, 0.54572256891553239, 0.67348404904390513, 0.7382603956139191, 0.8698257510052827, 0.93311187597522882, 0.9331187979095773, 0.9331516714515109, 0.93420458642001369, 0.95484745240213098, 0.97224891604963204, 0.89224119470644636, 0.89224119470644636, 0.89225214303127753, 0.89230323235251485, 0.89193024274130084, 0.8903832557833643, 0.8857692971796618, 0.87424104334877994, 0.87424104334877994, 0.87424104334877994, 0.87425710801617362, 0.87475760572243133, 0.8761553987170092, 0.88226503467549944, 0.94375436601413365, 0.94375436601413365])
fscore_0.append([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.077347124000268011, 0.46175709810616072, 0.47326504459409485, 0.61372494703617153, 0.61373576425330367, 0.61373576425330367, 0.61411105351568118, 0.7533598534010052, 0.80056088320606167, 0.9284853606763569, 0.92891774777393199, 0.92891774777393199, 0.92892128530238427, 0.92376790562835076, 0.92763237442280722, 0.95983815375393366, 0.96848420339639063, 0.96848420339639063, 0.96850416557810093, 0.96851081946697726, 0.974058311176904, 0.97356833915652485, 0.9766624713255444, 0.97842535093922867, 0.97842535093922867, 0.97842535093922867, 0.97844844288869648, 0.97802102168889071, 0.97883266775481759, 0.97949389461190639, 0.9814345528442161, 0.9814345528442161])
fscore_0.append([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.041830521572757802, 0.43252256330195565, 0.44166900079436872, 0.57582193458247855, 0.57582193458247855, 0.57583337013557945, 0.57583337013557945, 0.73974023391023602, 0.80343210402899168, 0.93479842357302356, 0.95807940665439184, 0.95808278415113668, 0.95808278415113668, 0.95809291650999062, 0.95814170564041734, 0.97302937033752424, 0.94856643904324844, 0.94852438800846528, 0.94852789238983359, 0.94856643904324844, 0.94893859249075396, 0.94718949300983712, 0.94319700394304851, 0.94881400713764619, 0.94885545850667408, 0.94885891263986322, 0.94884054113556981, 0.94875789667435795, 0.95073307602123491, 0.95794831740316144, 0.97127995802996758, 0.97127995802996758])
fscore_0.append([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.029844774663824306, 0.38699193083843414, 0.4088931940312277, 0.48623366188897971, 0.48623366188897971, 0.48626623912310524, 0.48626623912310524, 0.58848328127230298, 0.65843586247679742, 0.78994887801636027, 0.89257349494408345, 0.89258091086244662, 0.89264466102631224, 0.89264836849893869, 0.94148183105238314, 0.96213939206275478, 0.9637235299610093, 0.9637235299610093, 0.96373687582705225, 0.96382671852061708, 0.96383005437564584, 0.96569694783359306, 0.97434033771593964, 0.97813173985727264, 0.97813173985727264, 0.97813834826668555, 0.97818460473944069, 0.97818460473944069, 0.97821623386911627, 0.98154625419403307, 0.98058829005531056, 0.98058829005531056])

average_0 = list(np.mean(np.matrix(fscore_0), axis=0).A1)
label_0 = [4, 8, 12, 16, 20, 24, 28, 38, 48, 58, 68, 78, 88, 98, 108, 118, 128, 138, 148, 158, 168, 178, 188, 198, 208, 218, 228, 238, 248, 258, 268, 278, 288, 298, 308, 318, 328, 338, 348, 358, 368, 378]

ranges = [label_0, label_0, label_0, label_0]
list = [average_trigrams, average_bigrams, average_unigrams, average_0]
names = ["trigrams without svd", "bigrams without svd", "unigrams without svd", "unigrams with svd"]

list_real = [fscore_bigrams, fscore_0]

plot_list(ranges, list, names)